<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PrivaShield AI</title>
  <link rel="stylesheet" href="popup.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container">

    <!-- ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ -->
    <header class="header">
      <div class="header-left">
        <div class="shield-icon">üõ°Ô∏è</div>
        <div>
          <h1 class="app-title">PrivaShield<span class="ai-badge">AI</span></h1>
          <p class="app-subtitle" id="currentUrl">Analyze any privacy policy</p>
        </div>
      </div>
      <div class="header-actions">
        <button class="icon-btn" id="settingsBtn" title="Settings">‚öôÔ∏è</button>
      </div>
    </header>

    <!-- ‚îÄ‚îÄ‚îÄ SCAN BUTTON ‚îÄ‚îÄ‚îÄ -->
    <div class="scan-section" id="scanSection">
      <button class="scan-btn" id="scanBtn">
        <span class="scan-icon">üîç</span>
        <span class="scan-text">Analyze This Page</span>
      </button>
      <p class="scan-hint">Click to scan the current page's privacy policy</p>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ LOADING ‚îÄ‚îÄ‚îÄ -->
    <div class="loading-section hidden" id="loadingSection">
      <div class="loader">
        <div class="loader-ring"></div>
        <div class="loader-ring"></div>
        <div class="loader-ring"></div>
      </div>
      <p class="loading-text" id="loadingText">Analyzing privacy policy...</p>
      <div class="loading-steps">
        <div class="step active" id="step1">
          <span class="step-dot"></span>
          <span>Extracting page content</span>
        </div>
        <div class="step" id="step2">
          <span class="step-dot"></span>
          <span>Running AI analysis</span>
        </div>
        <div class="step" id="step3">
          <span class="step-dot"></span>
          <span>Mapping permissions</span>
        </div>
        <div class="step" id="step4">
          <span class="step-dot"></span>
          <span>Detecting hidden clauses</span>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ RESULTS TABS ‚îÄ‚îÄ‚îÄ -->
    <div class="results-section hidden" id="resultsSection">

      <!-- Tab Bar -->
      <div class="tab-bar">
        <button class="tab active" data-tab="summary">Summary</button>
        <button class="tab" data-tab="risks">Risks</button>
        <button class="tab" data-tab="permissions">Permissions</button>
        <button class="tab" data-tab="hidden">Hidden</button>
        <button class="tab" data-tab="chat">Chat</button>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ TAB: SUMMARY ‚îÄ‚îÄ‚îÄ -->
      <div class="tab-content active" id="tab-summary">
        <div class="score-card" id="scoreCard">
          <div class="score-gauge">
            <svg viewBox="0 0 120 120" class="gauge-svg">
              <circle cx="60" cy="60" r="52" class="gauge-bg"></circle>
              <circle cx="60" cy="60" r="52" class="gauge-fill" id="gaugeFill"></circle>
            </svg>
            <div class="score-number" id="scoreNumber">-</div>
            <div class="score-label" id="scoreLabel">Risk Score</div>
          </div>
          <div class="score-level" id="scoreLevel">Analyzing...</div>
        </div>
        <div class="summary-content" id="summaryContent">
          <p class="summary-placeholder">Click "Analyze This Page" to get started</p>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ TAB: RISKS ‚îÄ‚îÄ‚îÄ -->
      <div class="tab-content" id="tab-risks">
        <div class="risk-flags" id="riskFlags">
          <p class="empty-state">No risks analyzed yet</p>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ TAB: PERMISSIONS ‚îÄ‚îÄ‚îÄ -->
      <div class="tab-content" id="tab-permissions">
        <div class="permissions-list" id="permissionsList">
          <p class="empty-state">No permissions analyzed yet</p>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ TAB: HIDDEN CLAUSES ‚îÄ‚îÄ‚îÄ -->
      <div class="tab-content" id="tab-hidden">
        <div class="hidden-clauses" id="hiddenClauses">
          <p class="empty-state">No hidden clauses detected yet</p>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ TAB: CHAT ‚îÄ‚îÄ‚îÄ -->
      <div class="tab-content" id="tab-chat">
        <div class="chat-container">
          <div class="chat-messages" id="chatMessages">
            <div class="chat-msg bot">
              <div class="msg-avatar">üõ°Ô∏è</div>
              <div class="msg-bubble">
                Hi! I've analyzed this page's privacy policy. Ask me anything about it ‚Äî like "What data do they collect?" or "Can I delete my account?"
              </div>
            </div>
          </div>
          <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="Ask about this privacy policy..." autocomplete="off">
            <button class="chat-send-btn" id="chatSendBtn">
              <span>‚û§</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ ERROR ‚îÄ‚îÄ‚îÄ -->
    <div class="error-section hidden" id="errorSection">
      <div class="error-icon">‚ö†Ô∏è</div>
      <p class="error-text" id="errorText">Something went wrong</p>
      <button class="retry-btn" id="retryBtn">Try Again</button>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ SETTINGS PANEL ‚îÄ‚îÄ‚îÄ -->
    <div class="settings-panel hidden" id="settingsPanel">
      <div class="settings-header">
        <h2>Settings</h2>
        <button class="close-settings" id="closeSettingsBtn">‚úï</button>
      </div>
      <div class="settings-body">
        <div class="setting-item">
          <label>API Server URL</label>
          <input type="text" id="apiUrlInput" value="http://localhost:8000" placeholder="http://localhost:8000">
        </div>
        <button class="save-settings-btn" id="saveSettingsBtn">Save Settings</button>
      </div>
    </div>

  </div>

  <script src="popup.js"></script>
</body>
</html>
